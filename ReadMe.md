# BunnyAuthåŠ¨æ€æƒé™æ§åˆ¶ç®€ä»‹


![GitHub Stars](https://img.shields.io/github/stars/BunnyMaster/bunny-admin-server?style=social)![GitHub forks](https://img.shields.io/github/forks/BunnyMaster/bunny-admin-server)![GitHub contributors](https://img.shields.io/github/contributors/BunnyMaster/bunny-admin-server)<img alt="GitHub License" src="https://img.shields.io/github/license/BunnyMaster/bunny-admin-server">![GitHub top language](https://img.shields.io/github/languages/top/BunnyMaster/bunny-admin-server)![GitHub Repo Size](https://img.shields.io/github/repo-size/BunnyMaster/bunny-admin-server)

> [!IMPORTANT]
>
> å¼€æºæƒé™æ¨¡æ¿[Pure-admin](https://pure-admin.github.io/vue-pure-admin/)
>
> **Pure-adminæ–‡æ¡£**ï¼šhttps://pure-admin.github.io/pure-admin-doc
>
> **é»˜è®¤å‡­è¯**
>
> é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªé»˜è®¤ç®¡ç†å‘˜ï¼Œæ•°æ®åº“ä¸­ç”¨æˆ·`id`æ˜¯`1`ï¼š
>
> ç”¨æˆ·åï¼š`Administrator`
>
> å¯†ç ï¼š`admin123`

> [!WARNING]
>
> å¦‚æœåˆšåˆå§‹åŒ–ç™»å½•çš„æ—¶å€™ï¼Œå‘ç°ç®¡ç†å‘˜ã€`Administrator`ã€‘å¯†ç é”™è¯¯ã€‚
>
> æ‰¾åˆ°æ•°æ®åº“`sys_user`ï¼Œå°†`Administrator`æ›¿æ¢æˆä¸‹é¢çš„å¯†ç ã€‚
>
> `$2a$10$h5BUwmMaVcEuu7Bz0TPPy.PQV8JP6CFJlbHTgT78G1s0YPIu2kfXe`

å¯ç²—å¯ç»†çš„æƒé™æ§åˆ¶ï¼Œå¤šå¹³å°æ–‡ä»¶ä¸Šä¼ ã€‚

## ğŸ“½ï¸è§†é¢‘è¯´æ˜åœ°å€

**ä»‹ç»è§†é¢‘è§†é¢‘**

- [RBACä¸­URLçš„æƒé™æ•°æ®åº“ã€åç«¯è®¾è®¡](https://www.bilibili.com/video/BV1nGVazrEKf/)
- [bunny-admin é…ç½®è¯´æ˜](https://www.bilibili.com/video/BV177VazMEiM/)
- [Bunny-Admin ç”¨æˆ·ç›¸å…³æ“ä½œ](https://www.bilibili.com/video/BV1B7VazME72/)
- [Bunny-Admin è§’è‰²æƒé™](https://www.bilibili.com/video/BV1ELVazzEnC/)
- [Bunny-Admin å‰©ä¸‹çš„ä¸šåŠ¡é€»è¾‘](https://www.bilibili.com/video/BV1ELVazzE7S/)
- [ä»£ç ç”Ÿæˆå™¨](https://www.bilibili.com/video/BV1d4Lxz9E3j/?vd_source=d42b5b664efb958be39eef8ee1196a7e)

**Githubåœ°å€**

- æƒé™åç«¯ï¼šhttps://github.com/BunnyMaster/bunny-admin-server
- æƒé™å‰ç«¯ï¼šhttps://github.com/BunnyMaster/bunny-admin-web
- ä»£ç ç”Ÿæˆå™¨ç«¯ï¼šhttps://github.com/BunnyMaster/generator-code-server

**Giteeåœ°å€**

- æƒé™åç«¯ï¼šhttps://gitee.com/BunnyBoss/bunny-admin-server
- æƒé™å‰ç«¯ï¼šhttps://gitee.com/BunnyBoss/bunny-admin-web
- ä»£ç ç”Ÿæˆå™¨ç«¯ï¼šhttps://gitee.com/BunnyBoss/generator-code-server

## ğŸš€ é¡¹ç›®ç®€ä»‹

ä¸€ä¸ªåŸºäº Spring Security 6 çš„ç°ä»£åŒ–åŠ¨æ€æƒé™æ§åˆ¶ç³»ç»Ÿï¼Œæä¾›å®Œæ•´çš„ RBAC æƒé™ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚æ”¯æŒå‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œå¯çµæ´»é…ç½®ç»†ç²’åº¦æƒé™æ§åˆ¶ã€‚

## ğŸ˜‹æ§åˆ¶å™¨ä¸Šæ³¨è§£è¯´æ˜

æ•´ä¸ªé¡¹ç›®æ˜¯åŸºäºURLï¼Œæ–¹ä¾¿å®šä¹‰æƒé™æ¥å£ï¼Œå³ä½¿é¡¹ç›®ä¸­æ¥å£ä¸å­˜åœ¨ï¼Œé€šè¿‡URLçš„æ–¹å¼å¢åˆ æƒé™ã€‚

æ¯”å¦‚é¡¹ç›®éœ€è¦ä¸º`dept`åˆ†é…äº†è§’è‰²ï¼Œè¿™ä¸ªè§’è‰²å¯ä»¥è®¿é—®`dept`ä¸‹æ‰€æœ‰çš„æ¥å£ï¼Œé‚£ä¹ˆå°±å¯ä»¥å†™æˆ`api/dept/**`ï¼Œå¦‚æœéœ€è¦`dept`ä¸‹æŸä¸ªæ¥å£ï¼Œ`/api/dept/aaa/bbb`ï¼Œè¿™ç§å½¢å¼ã€‚

å¦‚æœé’ˆå¯¹åˆ†é¡µæŸ¥è¯¢ï¼Œåˆ†é¡µå‚æ•°å†™åœ¨URLä¸Šçš„ï¼Œå¯ä»¥è¿™æ ·åšï¼Œ`/api/dept/*/*`è¿™æ ·å°±å¯ä»¥åšåˆ°çµæ´»çš„æƒé™æ§åˆ¶ã€‚

ä½†æ˜¯åœ¨éƒ¨åˆ†åœºæ™¯ä¸‹ï¼Œæ¥å£å°±æ˜¯æˆ‘ä»¬çš„æƒé™ï¼Œè¿™æ—¶å¦‚æœæ‰‹åŠ¨ä¸€ä¸ªä¸€ä¸ªæ·»åŠ URLå¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥ä½¿ç”¨çš„swaggerè‡ªå¸¦çš„æ³¨è§£å’Œ`PermissionTag`ï¼Œè‡ªå®šä¹‰çš„æ³¨è§£çš„æ–¹å¼ï¼Œå¦‚æœè¿™æ—¶çš„é¡¹ç›®éœ€æ±‚æ˜¯ï¼Œä¸ºæ•´ä¸ªæ¥å£æ·»åŠ æƒé™ï¼Œå°±å¯ä»¥ç”¨åå°„çš„æ–¹å¼æ·»åŠ ã€‚

ä½¿ç”¨æ”¾å°„çš„æ–¹å¼å·²ç»æ”¾åœ¨controllerçš„ç›®å½•ä¸‹ï¼Œçœ‹`ReadMe`æ–‡æ¡£å³å¯ã€‚

## âœ¨é‡å¤§æ›´æ–°

### æ ¸å¿ƒæ”¹è¿›

**v4.0.0**

- **å…¨é¢é‡æ„**ï¼šåç«¯æ¥å£ã€å®ä½“ç±»ç­‰é‡æ„ï¼Œå‰ç«¯é‡æ„éƒ¨åˆ†j+ä¼˜åŒ–æ“ä½œä½“éªŒ
- **æ‰¹é‡æ“ä½œæ”¯æŒ**ï¼š
  - âœ…èœå•ç®¡ç†ï¼šå®Œå–„å±æ€§å†…å®¹
  - âœ… æƒé™ç®¡ç†ï¼šæ”¯æŒ JSON/Excel å¯¼å…¥å¯¼å‡º
  - âœ… è§’è‰²ç®¡ç†ï¼šæ”¯æŒ Excel æ‰¹é‡æ›´æ–°
  - âœ… å¤šè¯­è¨€é…ç½®ï¼šæ”¯æŒ JSON/Excel æ›´æ–°ï¼ˆå…¨é‡æ›¿æ¢æ¨¡å¼ï¼‰

**v4.0.1**

- æ–‡ä»¶ç³»ç»Ÿæ”¯æŒå¤šå¹³å°ï¼Œåªéœ€è¦æ‰‹åŠ¨é…ç½®å³å¯ã€‚
- æœ‰éœ€è¦å‚è€ƒæ–‡æ¡£ï¼šhttps://x-file-storage.xuyanwu.cn/#/
- æ–‡ä»¶åˆ é™¤å’Œä¸‹è½½ç­‰éœ€è¦å®ç°å¯¹åº”æ¥å£`FileRecorder `ï¼Œç›®å‰ä»¥å®ç°ï¼Œå¯¹åº”ä»£ç å’Œæ§åˆ¶å™¨éƒ½åœ¨æ–‡ä»¶å¤¹`file`ä¸‹ï¼Œå¦‚æœ‰éœ€è¦ä¿®æ”¹å¯ä»¥å‚è€ƒã€x-file-storageã€‘æ–‡æ¡£ä¿®æ”¹ã€‚

## ğŸ§ ç”¨æ³•æç¤º

> [!TIP]
>
> å¤šè¯­è¨€ä½¿ç”¨æç¤ºï¼š
>
> è™½ç„¶ç›´æ¥è®©ç”¨æˆ·æ“ä½œJSONæ–‡ä»¶æœ‰ä¸€å®šé—¨æ§›ï¼ˆå¤šæ•°ç”¨æˆ·ä¸ç†Ÿæ‚‰JSONæ ¼å¼ï¼‰ï¼Œä½†åœ¨å¤šè¯­è¨€é¡¹ç›®å¼€å‘ä¸­ï¼ŒJSONæ ¼å¼å…·æœ‰ç‹¬ç‰¹ä¼˜åŠ¿ï¼š
>
> 1. ç»“æ„åŒ–ç‰¹æ€§ - çº¯æ–‡æœ¬æ ¼å¼ä¾¿äºAIè§£æå¤„ç†
> 2. é«˜æ•ˆç¿»è¯‘æµç¨‹ï¼š
>    - å¼€å‘è€…åªéœ€å®Œæˆä¸­æ–‡ç‰ˆæœ¬
>    - ä¸Šä¼ JSONæ–‡ä»¶è‡³AIç¿»è¯‘å·¥å…·
>    - ç®€å•æŒ‡ä»¤å³å¯æ‰¹é‡ç”Ÿæˆè‹±æ–‡/ç¹ä½“ä¸­æ–‡/éŸ©è¯­ç­‰ç‰ˆæœ¬
> 3. æ˜¾è‘—èŠ‚çœå¼€å‘æ—¶é—´ - å®ç°"ä¸€æ¬¡ç¼–å†™ï¼Œå¤šè¯­è¨€é€‚é…"çš„é«˜æ•ˆå·¥ä½œæµ

## ğŸ” æƒé™æ§åˆ¶ä½“ç³»

![image-20250428225337843](./images/image-20250428225337843-1745854181492-5.png)

### è®¿é—®è§„åˆ™é…ç½®

é€šè¿‡ `WebSecurityConfig` é…ç½®

| è·¯å¾„ç±»å‹ | ç¤ºä¾‹              | è®¿é—®è¦æ±‚ | é…ç½®æ–¹å¼                  |
| -------- | ----------------- | -------- | ------------------------- |
| å…¬å¼€æ¥å£ | `/api/public/**`  | æ— éœ€è®¤è¯ | è·¯å¾„åŒ…å« `public` å…³é”®å­—  |
| ç§æœ‰æ¥å£ | `/api/private/**` | éœ€ç™»å½•   | è·¯å¾„åŒ…å« `private` å…³é”®å­— |

### è·¯å¾„åŒ¹é…ç­–ç•¥

```java
public static String[] annotations = { ... };

// é…ç½®ç¤ºä¾‹
http.authorizeHttpRequests(auth -> auth
    .authorizeHttpRequests(authorize -> authorize
    .requestMatchers(annotations).permitAll()
);
```

### Mavenå·¥ç¨‹ç»“æ„

```
bunny-auth/
â”œâ”€â”€ auth-api      # æ¥å£å®šä¹‰å±‚
â”œâ”€â”€ auth-core     # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ config    # å®‰å…¨é…ç½®
â”‚   â””â”€â”€ domain    # domain
â”‚   â””â”€â”€ ......    # è¿˜è¦å¾ˆå¤š...
â”œâ”€â”€ service       # ä¸šåŠ¡å®ç°
â””â”€â”€ dao           # æ•°æ®æŒä¹…å±‚
```

## ğŸ› ï¸ åº”ç”¨åœºæ™¯

### 1. çº¯å‰ç«¯æ§åˆ¶æ¨¡å¼

å‰ç«¯åŸç†è¯¦æƒ…æŸ¥çœ‹Pureæ–‡æ¡£ï¼šhttps://pure-admin.cn/pages/RBAC/#%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE

![image-20250428230444403](./images/image-20250428230444403-1745854157395-3.png)

- **é¡µé¢æ§åˆ¶**ï¼š
  1. ä¸ºè·¯ç”±èœå•åˆ†é…è§’è‰²
  2. ä¸ºç”¨æˆ·åˆ†é…è§’è‰²
- **æŒ‰é’®æ§åˆ¶**ï¼š
  ```ts
  // å‰ç«¯æƒé™ç é…ç½®
  const auth = {
    add: ['i18nType::add'],
    update: ['i18nType::update'],
    delete: ['i18nType::delete'],
  };
  ```

### 2. çº¯åç«¯æ§åˆ¶æ¨¡å¼

- æ¥å£çº§æƒé™ï¼šåˆ†é¡µè¿™ç§å°±å¯ä»¥æ·»åŠ ä¸º`/api/permission/*/*`

  ```java
  @Tag(name = "ç³»ç»Ÿæƒé™")
  @PermissionTag(permission = "permission::*")
  @RestController
  @RequestMapping("api/permission")
  public class PermissionController {
      @Operation(summary = "åˆ†é¡µæŸ¥è¯¢")
      @PermissionTag(permission = "permission::query")
      @GetMapping("{page}/{limit}")
      public Result<PageResult<PermissionVo>> getPermissionPage(
          @PathVariable Integer page,
          @PathVariable Integer limit) {
          // ...
      }
  }
  ```

### 3. å…¨æ ˆæ§åˆ¶æ¨¡å¼

å‰ä¸¤ä¸ªç»“åˆ

## ğŸ›¡ï¸ å®‰å…¨é…ç½®

### è·¯å¾„åŒ¹é…ç­–ç•¥

AntPathè¯¦æƒ…ï¼šhttps://juejin.cn/spost/7498247273660743732

| æ¨¡å¼     | ç¤ºä¾‹            | è¯´æ˜             |
| -------- | --------------- | ---------------- |
| ç²¾ç¡®åŒ¹é… | `/api/user`     | å®Œå…¨åŒ¹é…è·¯å¾„     |
| é€šé…ç¬¦   | `/api/user/*`   | åŒ¹é…å•çº§è·¯å¾„     |
| å¤šçº§é€šé… | `/api/user/**`  | åŒ¹é…å¤šçº§è·¯å¾„     |
| æ–¹æ³•é™å®š | `GET /api/user` | åŒ¹é…ç‰¹å®šHTTPæ–¹æ³• |

## ğŸ§° æŠ€æœ¯æ ˆ

### ğŸ˜„å‰ç«¯

- Vue 3 + PureAdmin æ¨¡æ¿
- è‡ªå®šä¹‰æƒé™ç»„ä»¶
- å›½é™…åŒ–æ”¯æŒ

### ğŸ˜ƒåç«¯

- Spring Boot 3 + Spring Security 6
- JDK 17
- MySQL + Redis + MinIO
- Swagger + Knife4j æ–‡æ¡£

### ğŸ˜€å¼€å‘ç¯å¢ƒ

æ ¹æ®ä¸åŒdocker å¯åŠ¨æ–¹å¼ä¸ä¸€æ ·

```bash
# ä¸€é”®å¯åŠ¨ä¾èµ–æœåŠ¡
docker-compose up -d
# æ–°ç‰ˆçš„docker
docker compose up -d
```

## ğŸ“š æœ€ä½³å®è·µ

1. **æ³¨è§£è§„èŒƒ**ï¼š
   ```java
   @Tag(name = "æ¨¡å—åç§°", description = "æ¨¡å—æè¿°")
   @Operation(summary = "æ¥å£æ‘˜è¦", tags = {"æƒé™ç "})
   // æˆ–è€…
   @Operation(summary = "æ¥å£æ‘˜è¦", tags = "æƒé™ç ")
   ```
2. **æƒé™ç è®¾è®¡**ï¼š

   - æ¨¡å—::æ“ä½œ (å¦‚ `user::create`)
   - åˆ†å±‚çº§è®¾è®¡ (å¦‚ `system:user:update`)

3. **æ‰¹é‡æ“ä½œ**ï¼š
   - ä½¿ç”¨ Excel/JSON ç®¡ç†å¤§é‡æƒé™é…ç½®
   - å®šæœŸå¤‡ä»½æƒé™é…ç½®

## ğŸŒŸ é¡¹ç›®ä¼˜åŠ¿

1. **çœŸæ­£çš„åŠ¨æ€æ§åˆ¶** - æ— éœ€ç¡¬ç¼–ç æƒé™é€»è¾‘
2. **çµæ´»çš„æ•°æ®å¯¼å…¥** - æ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼
3. **ç»†ç²’åº¦æ§åˆ¶** - ä»é¡µé¢åˆ°æŒ‰é’®çš„å¤šå±‚çº§æƒé™
4. **ç°ä»£åŒ–æŠ€æœ¯æ ˆ** - åŸºäºæœ€æ–° Spring ç”Ÿæ€
5. **å¼€ç®±å³ç”¨** - æä¾›å®Œæ•´ Docker éƒ¨ç½²æ–¹æ¡ˆ

## ğŸ“Œ æ³¨æ„äº‹é¡¹

1. å¤šè¯­è¨€æ›´æ–°ä¼šå®Œå…¨æ›¿æ¢ç°æœ‰é…ç½®
2. ç”Ÿäº§ç¯å¢ƒå»ºè®®ç¦ç”¨ Swagger ç«¯ç‚¹
3. å¤æ‚æƒé™å»ºè®®ä½¿ç”¨ Excel æ‰¹é‡ç®¡ç†

## ğŸ“ˆ åç»­è§„åˆ’

æš‚æ— 

## ğŸ“å‰åç«¯æ¥å£è§„èŒƒ

### ğŸŒå‰ç«¯ç¤ºä¾‹è§„èŒƒ

| **æ“ä½œ** | **API å±‚**    | **Pinia å±‚**    |
| :------- | :------------ | :-------------- |
| æŸ¥è¯¢å•ä¸ª | `getUser`     | `loadUser`      |
| æŸ¥è¯¢åˆ—è¡¨ | `getUserList` | `loadUserList`  |
| åˆ†é¡µæŸ¥è¯¢ | `getUserPage` | `fetchUserPage` |
| æ–°å¢æ•°æ® | `createUser`  | `addUser`       |
| æ›´æ–°æ•°æ® | `updateUser`  | `editUser`      |
| åˆ é™¤æ•°æ® | `deleteUser`  | `removeUser`    |

### ğŸ›Ÿåç«¯æ¥å£ç¤ºä¾‹è§„èŒƒ

éµå¾ªRestful

| **æ“ä½œ** | **RESTful**                 |
| :------- | :-------------------------- |
| æŸ¥è¯¢åˆ—è¡¨ | `GET /users`                |
| åˆ†é¡µæŸ¥è¯¢ | `GET /users/{page}/{limit}` |
| æŸ¥è¯¢å•ä¸ª | `GET /users/{id}`           |
| æ–°å¢     | `POST /users`               |
| æ›´æ–°     | `PUT /users/{id}`           |
| åˆ é™¤     | `DELETE /users/{id}`        |

![wx_alipay](./images/wx_alipay.png)
